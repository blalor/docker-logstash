filter {
    ## don't process any events we know are going to be fed to the tcp output.
    ## this tag won't appear in the input because @tags overwrites tags.
    if "codec:oldlogstashjson" in [@tags] and "beaver" in [@tags] {
        mutate {
            add_tag => [ "filter_through_tcp" ]
        }
    }
}
